<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:p="http://primefaces.org/ui">

<f:metadata>
    <f:event type="preRenderView" listener="#{dashboardSchedule.loadDeliverySchedules(user)}" />
</f:metadata>

    <h:head>
        <title>Dashboard</title>
        <h:outputScript library="primefaces" name="jquery/jquery.js"/>
        <h:outputScript library="js" name="materialize.min.js"/>
        <!--Materialize CSS-->
        <h:outputStylesheet library="css" name="materialize.min.css"/>

        <style type="text/css">
            .value {
                width: 600px;
            }

            #calendar\:schedule {
                -webkit-transition: all 1s linear;
                -moz-transition: all 1s linear;
                -o-transition: all 1s linear;
                transition: all 1s linear;
            }

            .requestView, .alertNotification, .userProfileView, .blurMsg {
                display : none;
            }

            body .ui-steps .ui-steps-item {
                width: 25%;
            }

            body .ui-state-highlight {
                text-shadow: none !important;
            }

            body .ui-steps.custom {
                margin-bottom: 30px;
            }

            body .ui-steps.custom .ui-steps-item .ui-menuitem-link {
                height: 10px;
                padding: 0 1em;
                overflow: visible;
                border: 1px solid #c8c8c8;
                display: block;
                background-color: #FFFFFF;
            }

            body .ui-steps.custom .ui-steps-item .ui-menuitem-link .ui-steps-number {
                background-color: #0081c2;
                color: #FFFFFF;
                display: inline-block;
                width: 30px;
                border-radius: 40px;
                margin-top: -10px;
                margin-bottom: 10px;
                position: relative;
                top: -3px;
            }

            body .ui-steps.custom .ui-steps-item .ui-menuitem-link .ui-steps-title {
                margin-top: -6px;
            }

            body .ui-steps.custom .ui-steps-item.ui-state-highlight .ui-menuitem-link .ui-steps-title {
                color: #555;
            }

            .dashboardContent {
                padding-left: 300px;
            }

            table {
                width: 90%;
            }

            @media only screen and (max-width : 992px) {
                .dashboardContent {
                    padding-left: 0;
                }
            }

            .alertBlur {
                -webkit-filter: blur(3px);
                -moz-filter: blur(3px);
                -o-filter: blur(3px);
                -ms-filter: blur(3px);
                filter: blur(3px);
            }

            .sidenavProfileImage:hover {
                background-color: rgba(0,0,0,0.05);
            }

            .waves-button-input {
                color: white;
            }
        </style>
    </h:head>



    <h:body>
        <ul id="slide-out" class="sidenav sidenav-fixed">
            <h:form>
                <p:commandLink oncomplete='$(".userProfileView").css("display", "block");$("#calendar\\:schedule").css("display", "none"); $(".requestView").css("display", "none"); $(".alertNotification").css("display", "none"); $(".blurMsg").css("display", "none");' update="profileView" actionListener="#{profileView.loadUserRating(user.id)}">
                    <div class="sidenavProfileImage">
                        <br/>
                        <div class="row">
                            <img class="responsive-img circle" src="resources/images/#{user.profilePic}" style="width: 150px; height: 150px; display: block; margin: auto;" />
                        </div>
                        <div class="row" align="center">
                            <span class="name" style="font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif; font-weight: 500; font-size: 15px; color: rgba(0,0,0,0.87);">#{user.firstName} #{user.lastName}</span>
                        </div>
                        <br/>
                    </div>
                </p:commandLink>
            </h:form>
            <li><a href="#!" class="sidebarBtn" onclick='$("#calendar\\:schedule").css("display", "block"); $(".requestView").css("display", "none"); $(".userProfileView").css("display", "none"); $(".alertNotification").css("display", "none"); $(".blurMsg").css("display", "none");'><i class="fa fa-calendar"></i>  Schedule</a></li>
            <li><a href="#!" class="sidebarBtn" onclick='$("#calendar\\:schedule").css("display", "none"); $(".requestView").css("display", "block"); $(".userProfileView").css("display", "none"); $(".alertNotification").css("display", "none"); $(".blurMsg").css("display", "none");'><i class="fa fa-tags"></i> Sent &amp; Received Requests</a></li>
            <li id="alertSideNav" style="display: none;"><a href="#!" class="sidebarBtn" onclick='$("#calendar\\:schedule").css("display", "none"); $(".requestView").css("display", "none"); $(".userProfileView").css("display", "none"); $(".alertNotification").css("display", "block"); $(".blurMsg").css("display", "block");'><i class="fa fa-exclamation-triangle"></i> Alert Recipients</a></li>
            <li><a href="#!" class="sidebarBtn" onclick='window.location.href = "./delivery.xhtml"'><i class="fa fa-arrow-left"></i> Return to Delivery Page</a></li>
        </ul>
        <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>

        <div class="dashboardContent">

            <div>
                <h:form id="calendar">
                    <div align="center">
                        <p:growl id="calendarGrowl" showDetail="true" />

                        <h:panelGrid columnClasses="value">
                            <p:schedule id="schedule" value="#{dashboardSchedule.eventModel}" widgetVar="myschedule" timeZone="GMT+8">
                                <p:ajax event="dateSelect" listener="#{dashboardSchedule.onDateSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
                                <p:ajax event="eventSelect" listener="#{dashboardSchedule.onEventSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
                            </p:schedule>
                        </h:panelGrid>

                        <p:dialog widgetVar="eventDialog" header="Event Details" showEffect="clip" hideEffect="clip">
                            <h:panelGrid id="eventDetails" columns="2">
                                <p:outputLabel for="title" value="Titles:" />
                                <p:inputText id="title" value="#{dashboardSchedule.event.title}" required="true" />

                                <p:outputLabel for="from" value="From:" />
                                <p:calendar id="from" value="#{dashboardSchedule.event.startDate}" pattern="dd/MM/yyyy HH:mm"/>

                                <p:outputLabel for="to" value="To:" />
                                <p:calendar id="to" value="#{dashboardSchedule.event.endDate}" pattern="dd/MM/yyyy HH:mm"/>

                                <p:outputLabel for="allDay" value="All Day:" />
                                <h:selectBooleanCheckbox id="allDay" value="#{dashboardSchedule.event.allDay}" />

                                <p:commandButton type="reset" value="Reset" />
                                <p:commandButton id="addButton" value="Save" action="#{dashboardSchedule.addEvent}" oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />
                            </h:panelGrid>
                        </p:dialog>
                    </div>
                </h:form>
            </div>

            <div align="center">
                <h:form id="profileView">
                    <div class="container card userProfileView">
                        <div class="row" style="-webkit-background-size: cover; background-size: cover; background-image: url('resources/images/#{profileView.profiledUser.profilePic}');">
                            <div class="row">
                                <br/>
                                <div class="col s12">
                                    <p:graphicImage value="resources/images/#{profileView.profiledUser.profilePic}" styleClass="circle responsive-img z-depth-3" style="width: 150px; height: 150px; border: 5px solid white;" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    <span class="card-title z-depth-3" style="background-color: white; padding: 5px 10px;">#{profileView.profiledUser.firstName} #{profileView.profiledUser.lastName}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    <span class="card-title z-depth-3" style="background-color: white; padding: 5px 10px;">#{profileView.profiledUser.gender}</span>
                                </div>
                            </div>
                            <ui:fragment rendered="#{profileView.profiledUser.adminStatus == true}">
                                <div class="row">
                                    <div class="col s12">
                                        <span class="card-title z-depth-3" style="background-color: white; padding: 5px 10px;"><i class="fa fa-certificate"></i>  Admin</span>
                                    </div>
                                </div>
                            </ui:fragment>
                        </div>

                        <div class="row" style="background-color: #E57373">
                            <div class="col s4">
                                Friendliness : <p:rating value="#{profileView.friendlinessRatingReadonly}" readonly="true" />
                            </div>
                            <div class="col s4">
                                Condition of Delivered Items : <p:rating value="#{profileView.conditionRatingReadonly}" readonly="true" />
                            </div>
                            <div class="col s4">
                                Punctuality : <p:rating value="#{profileView.punctualityRatingReadonly}" readonly="true" />
                            </div>
                        </div>

                        <br/>

                        <div class="row">
                            <div class="col s12">
                                <span class="card-title left">Statistics</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col m6 s12">
                                <div class="card z-depth-3">
                                    <br/>
                                    <div class="row">
                                        <span style="font-size: 70px; position: relative; right: 30%; color: #E57373;">#{profileView.ratingsReceived}</span>
                                    </div>
                                    <div class="row">
                                        <span class="card-title" style="position: relative; right: 15%;">Ratings Received</span>
                                    </div>
                                    <br/>
                                </div>
                            </div>
                            <div class="col m6 s12">
                                <br/>
                                <div class="card z-depth-3">
                                    <div class="row">
                                        <span style="font-size: 70px; position: relative; right: 30%; color: #E57373;">#{profileView.profiledUser.completedDeliveries}</span>
                                    </div>
                                    <div class="row">
                                        <span class="card-title" style="position: relative; right: 10%;">Completed Deliveries</span>
                                    </div>
                                    <br/>
                                </div>
                            </div>
                        </div>
                    </div>
                </h:form>
            </div>

            <div>
                <h:form id="tabView">
                    <p:growl id="tabViewGrowl" life="2000" />

                    <div class="row requestView">
                        <div class="col s12">
                            <ul class="tabs">
                                <li class="tab col s3"><a class="active" href="#pending">Pending Requests</a></li>
                                <li class="tab col s3"><a href="#accepted">Accepted Requests</a></li>
                                <li class="tab col s3"><a href="#log">Delivered / Item Rating</a></li>
                            </ul>
                        </div>

                        <div id="pending" class="col s12">
                            <ul class="collapsible">
                                <li class="active">
                                    <div class="collapsible-header">Outbox</div>
                                    <div class="collapsible-body">
                                        <ui:repeat value="#{dashboardSchedule.deliverySchedules}" var="tempSchedules">
                                            <ui:fragment rendered="#{tempSchedules.deliveryStatus == 0}">
                                                <ui:fragment rendered="#{tempSchedules.delivererId == user.id}">
                                                    <div class="row dashboardlistings card-panel white z-depth-2">
                                                        <div class="col s10">
                                                            <span class="new badge left green" style="margin-right: 5px;" data-badge-caption="User : #{tempSchedules.recipientName}" />
                                                            <ui:repeat value="#{dashboardSchedule.sentScheduledRequestDetails}" var="tempRequest">
                                                                <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                                    <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Sending Item : #{tempRequest.itemName}" />
                                                                    <span class="new badge left" style="margin-right: 5px;" data-badge-caption="At : #{tempRequest.location}" />
                                                                </ui:fragment>
                                                            </ui:repeat>

                                                            <span class="new badge left" style="margin-right: 5px;" data-badge-caption="#{tempSchedules.deliveryDate}" />
                                                        </div>
                                                        <div class="col s2" align="right">
                                                            <ui:repeat value="#{dashboardSchedule.sentScheduledRequestDetails}" var="tempRequest">
                                                                <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                                    <p:commandLink update="loadDialog" actionListener="#{dashboardSchedule.onclickPreview(tempSchedules, tempRequest)}"><i class="modal-trigger fa fa-eye tooltipped" data-target="modal2" data-position="top" data-tooltip="Preview schedule" style="cursor: pointer;"></i></p:commandLink>  |   <h:commandLink action="#{dashboardSchedule.onclickEdit(tempSchedules)}"><i class="fa fa-pencil tooltipped" data-position="top" data-tooltip="Edit schedule" style="cursor: pointer;"></i></h:commandLink>    |    <p:commandLink oncomplete="window.location.href = 'userDashboard.xhtml'" actionListener="#{deliveryScheduleOptions.deleteDeliverySchedule(tempSchedules)}"><p:confirm header="Confirmation" message="Are you sure you want to delete this schedule?" icon="fa fa-exclamation-triangle" /><i class="fa fa-times tooltipped" data-position="top" data-tooltip="Delete schedule" style="cursor: pointer;"></i></p:commandLink>
                                                                </ui:fragment>
                                                            </ui:repeat>
                                                        </div>
                                                    </div>
                                                </ui:fragment>
                                            </ui:fragment>
                                        </ui:repeat>
                                    </div>
                                </li>
                                <li>
                                    <div class="collapsible-header">Inbox</div>
                                    <div class="collapsible-body">
                                        <ui:repeat value="#{dashboardSchedule.deliverySchedules}" var="tempSchedules">
                                            <ui:fragment rendered="#{tempSchedules.deliveryStatus == 0}">
                                                <ui:fragment rendered="#{tempSchedules.recipientId == user.id}">
                                                    <div class="row dashboardlistings card-panel white z-depth-2">
                                                        <div class="col s10">
                                                            <span class="new badge left green" style="margin-right: 5px;" data-badge-caption="User : #{tempSchedules.delivererName}" />

                                                            <ui:repeat value="#{dashboardSchedule.receivedScheduledRequestDetails}" var="tempRequest">
                                                                <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                                    <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Delivering Item : #{tempRequest.itemName}" />
                                                                </ui:fragment>
                                                            </ui:repeat>

                                                            <span class="new badge left" style="margin-right: 5px;" data-badge-caption="#{tempSchedules.deliveryDate}" />
                                                        </div>
                                                        <div class="col s2" align="right">
                                                            <ui:repeat value="#{dashboardSchedule.receivedScheduledRequestDetails}" var="tempRequest">
                                                                <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                                    <p:commandLink update="loadDialog" actionListener="#{dashboardSchedule.onclickPreview(tempSchedules, tempRequest)}"><i class="modal-trigger fa fa-eye tooltipped" data-target="modal2" data-position="top" data-tooltip="Preview schedule" style="cursor: pointer;"></i></p:commandLink> |   <p:commandLink action="#{dashboardSchedule.acceptRequest(tempSchedules)}"><i class="fa fa-check tooltipped" data-position="top" data-tooltip="Accept Request" style="cursor: pointer;"></i></p:commandLink>  |   <p:commandLink oncomplete="window.location.href = 'userDashboard.xhtml'" actionListener="#{deliveryScheduleOptions.deleteDeliverySchedule(tempSchedules)}"><i class="fa fa-times tooltipped" data-position="top" data-tooltip="Reject Request" style="cursor: pointer;"></i></p:commandLink>
                                                                </ui:fragment>
                                                            </ui:repeat>
                                                        </div>
                                                    </div>
                                                </ui:fragment>
                                            </ui:fragment>
                                        </ui:repeat>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div id="accepted" class="col s12">
                            <ui:repeat value="#{dashboardSchedule.deliverySchedules}" var="tempSchedules">
                                <ui:fragment rendered="#{tempSchedules.deliveryStatus == 1}">
                                    <div class="ui-g dashboardlistings card-panel white z-depth-2">
                                        <ui:fragment rendered="#{tempSchedules.recipientId == user.id}">
                                            <div class="ui-g-10">
                                                <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Receiving From : #{tempSchedules.delivererName}" />
                                                <ui:repeat value="#{dashboardSchedule.receivedScheduledRequestDetails}" var="tempRequest">
                                                    <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                        <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Item : #{tempRequest.itemName}" />
                                                    </ui:fragment>
                                                </ui:repeat>
                                                <ui:fragment rendered="#{tempSchedules.daysLeft > 0}">
                                                    <span class="new badge left" style="margin-right: 5px;" data-badge-caption="Will Deliver Product #{tempSchedules.daysLeft} Days Later" />
                                                </ui:fragment>
                                                <ui:fragment rendered="#{tempSchedules.daysLeft == 0}">
                                                    <span class="new badge left orange" style="margin-right: 5px;" data-badge-caption="Today" />
                                                </ui:fragment>
                                                <ui:fragment rendered="#{0 > tempSchedules.daysLeft}">
                                                    <span class="new badge left red" style="margin-right: 5px;" data-badge-caption="Overdue" />
                                                </ui:fragment>
                                            </div>
                                            <div class="ui-g-2" align="right">
                                                <ui:fragment rendered="#{user.phoneNumber == 0}">
                                                    <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Link Phone Number</a>
                                                </ui:fragment>
                                                <ui:fragment rendered="#{user.phoneNumber > 0}">
                                                    <ui:repeat value="#{dashboardSchedule.receivedScheduledRequestDetails}" var="tempRequest">
                                                        <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                            <p:commandLink oncomplete='$(".blurMsg").css("display", "block"); $("#alertSideNav").css("display", "block"); $("#calendar\\:schedule").css("display", "none"); $(".requestView").css("display", "none"); $(".userProfileView").css("display", "none"); $(".alertNotification").css("display", "block");' update="alertNotify" actionListener="#{alerts.loadUser(tempSchedules, tempRequest, tempSchedules.delivererId)}"><i class="fa fa-envelope tooltipped" data-position="top" data-tooltip="Preview schedule/Notify user" style="cursor: pointer;"></i></p:commandLink>  |    <p:commandLink oncomplete="window.location.href = 'userDashboard.xhtml'" actionListener="#{deliveryScheduleOptions.deleteDeliverySchedule(tempSchedules)}"><p:confirm header="Confirmation" message="Are you sure you want to delete this schedule? The recipient will be notified." icon="fa fa-exclamation-triangle" /><i class="fa fa-times tooltipped" data-position="top" data-tooltip="Delete schedule" style="cursor: pointer;"></i></p:commandLink>
                                                        </ui:fragment>
                                                    </ui:repeat>

                                                </ui:fragment>
                                            </div>
                                        </ui:fragment>
                                        <ui:fragment rendered="#{tempSchedules.delivererId == user.id}">
                                            <div class="ui-g-10">
                                                <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Sending To : #{tempSchedules.recipientName}" />
                                                <ui:repeat value="#{dashboardSchedule.sentScheduledRequestDetails}" var="tempRequest">
                                                    <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                        <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Item : #{tempRequest.itemName}" />
                                                    </ui:fragment>
                                                </ui:repeat>
                                                <ui:fragment rendered="#{tempSchedules.daysLeft > 0}">
                                                    <span class="new badge left" style="margin-right: 5px;" data-badge-caption="Will Deliver Product #{tempSchedules.daysLeft} Days Later" />
                                                </ui:fragment>
                                                <ui:fragment rendered="#{tempSchedules.daysLeft == 0}">
                                                    <span class="new badge left orange" style="margin-right: 5px;" data-badge-caption="Today" />
                                                </ui:fragment>
                                                <ui:fragment rendered="#{0 > tempSchedules.daysLeft}">
                                                    <span class="new badge left red" style="margin-right: 5px;" data-badge-caption="Overdue" />
                                                </ui:fragment>
                                            </div>
                                            <div class="ui-g-2" align="right">
                                                <ui:fragment rendered="#{user.phoneNumber == 0}">
                                                    <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Link Phone Number</a>
                                                </ui:fragment>
                                                <ui:fragment rendered="#{user.phoneNumber > 0}">
                                                    <ui:repeat value="#{dashboardSchedule.sentScheduledRequestDetails}" var="tempRequest">
                                                        <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                            <p:commandLink oncomplete='$(".blurMsg").css("display", "block"); $("#alertSideNav").css("display", "block"); $("#calendar\\:schedule").css("display", "none"); $(".requestView").css("display", "none"); $(".userProfileView").css("display", "none"); $(".alertNotification").css("display", "block");' update="alertNotify" actionListener="#{alerts.loadUser(tempSchedules, tempRequest, tempSchedules.recipientId)}"><i class="fa fa-envelope tooltipped" data-position="top" data-tooltip="Preview schedule/Notify user" style="cursor: pointer;"></i></p:commandLink>  |    <p:commandLink oncomplete="window.location.href = 'userDashboard.xhtml'" actionListener="#{deliveryScheduleOptions.deleteDeliverySchedule(tempSchedules)}"><p:confirm header="Confirmation" message="Are you sure you want to delete this schedule? The recipient will be notified." icon="fa fa-exclamation-triangle" /><i class="fa fa-times tooltipped" data-position="top" data-tooltip="Delete schedule" style="cursor: pointer;"></i></p:commandLink>
                                                        </ui:fragment>
                                                    </ui:repeat>

                                                </ui:fragment>
                                            </div>
                                        </ui:fragment>
                                    </div>
                                </ui:fragment>
                            </ui:repeat>
                        </div>

                        <div id="log" class="col s12">
                            <ui:repeat value="#{dashboardSchedule.deliverySchedules}" var="tempSchedules">
                                <ui:fragment rendered="#{tempSchedules.deliveryStatus == 2}">
                                    <ui:fragment rendered="#{tempSchedules.recipientId == user.id}">
                                        <div class="ui-g dashboardlistings card-panel white z-depth-2">
                                            <div class="ui-g-10">
                                                <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Received From : #{tempSchedules.recipientName}" />
                                                <ui:repeat value="#{dashboardSchedule.receivedScheduledRequestDetails}" var="tempRequest">
                                                    <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                        <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Item Received : #{tempRequest.itemName}" />
                                                    </ui:fragment>
                                                </ui:repeat>
                                            </div>
                                            <div class="ui-g-2" align="right">
                                                <ui:repeat value="#{dashboardSchedule.receivedScheduledRequestDetails}" var="tempRequest">
                                                    <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                        <p:commandLink update="dashboardDialogs" oncomplete="PF('ratingDelivery').show()" actionListener="#{dashboardSchedule.onclickPreview(tempSchedules, tempRequest)}"><i class="fa fa-star tooltipped" data-position="top" data-tooltip="Rate Delivery" style="cursor: pointer;"></i></p:commandLink>
                                                    </ui:fragment>
                                                </ui:repeat>

                                            </div>
                                        </div>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{tempSchedules.delivererId == user.id}">
                                        <div class="ui-g dashboardlistings card-panel white z-depth-2">
                                            <div class="ui-g-10">
                                                <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Sent To : #{tempSchedules.recipientName}" />
                                                <ui:repeat value="#{dashboardSchedule.sentScheduledRequestDetails}" var="tempRequest">
                                                    <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                                        <span class="new badge left blue" style="margin-right: 5px;" data-badge-caption="Item Sent : #{tempRequest.itemName}" />
                                                    </ui:fragment>
                                                </ui:repeat>
                                            </div>
                                            <div class="ui-g-2" align="right">
                                            </div>
                                        </div>
                                    </ui:fragment>
                                </ui:fragment>
                            </ui:repeat>
                        </div>
                    </div>
                </h:form>

                <h:form id="dashboardDialogs">
                    <p:growl id="growl" life="2000" />

                    <p:dialog header="User Rating" widgetVar="ratingDelivery" modal="true" showEffect="clip" hideEffect="clip" resizable="true">
                        <p:outputPanel style="text-align:center;">
                            <p:outputLabel value="Friendliness of Deliverer :" /><p:rating value="#{profileView.friendlinessRating}" />

                            <p:outputLabel value="Condition of Delivered Item :" /><p:rating value="#{profileView.conditionRating}" />

                            <p:outputLabel value="Punctuality of Delivery :" /><p:rating value="#{profileView.punctualityRating}" />

                            <h:inputHidden value="#{deliveryScheduleOptions.id}" /><h:inputHidden value="#{deliveryScheduleOptions.recipientId}" /><h:inputHidden value="#{deliveryScheduleOptions.delivererId}" /><h:inputHidden value="#{deliveryScheduleOptions.deliveryId}" />


                            <p:commandButton oncomplete="PF('ratingDelivery').hide()" update="growl" value="Send Rating" action="#{profileView.sendRating(deliveryScheduleOptions)}" style="margin-right:20px;" styleClass="ui-priority-primary" />
                        </p:outputPanel>
                    </p:dialog>

                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="fa fa-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="fa fa-times" />
                    </p:confirmDialog>
                </h:form>
            </div>

            <div align="center">
                <h:form id="alertNotify">
                    <ui:fragment rendered="#{alerts.alertedUser.phoneNumber == 0}">
                        <div class="container blurMsg" style="background-color: #f4c542; border-radius: 10px;">
                            <div class="row">
                                <div class="col s12">
                                    <i class="fa fa-exclamation-triangle"></i> The selected user has not added their phone number yet.
                                </div>
                            </div>
                        </div>
                        <div class="container alertNotification card alertBlur">
                            <div class="row">
                                <div class="col s12">
                                    <span class="card-title">Alerts : #{alerts.alertedUser.firstName} #{alerts.alertedUser.lastName}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="preloader-wrapper big active">
                                        <div class="spinner-layer spinner-blue">
                                            <div class="circle-clipper left">
                                                <div class="circle"></div>
                                            </div>
                                            <div class="gap-patch">
                                                <div class="circle"></div>
                                            </div>
                                            <div class="circle-clipper right">
                                                <div class="circle"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <h6>Request is still pending...</h6>
                                    <br/>
                                    <br/>
                                    <br/>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    Preset Messages : <p:commandButton onclick="M.toast({html: 'Sent!'})" action="#{alerts.testFunction}" class="waves-effect waves-light btn disabled" value="On My Way" icon="fa fa-home" />  <p:commandButton class="waves-effect waves-light btn disabled" value="I might be late" icon="fa fa-clock-o" />
                                </div>
                            </div>

                            <div class="row">
                                <div class="col s12">
                                    <h4 style="color: gray;">OR</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col s12">
                                    Make Your Own Message!
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    <p:inputTextarea rows="6" cols="33"  />
                                </div>
                            </div>
                        </div>
                    </ui:fragment>
                    <ui:fragment rendered="#{alerts.alertedUser.phoneNumber > 0}">
                        <div class="container alertNotification card">
                            <br/>
                            <div class="row">
                                <div class="col s12">
                                    <span class="card-title">Alerts : #{alerts.alertedUser.firstName} #{alerts.alertedUser.lastName}</span>
                                </div>
                            </div>
                            <br/>
                            <div class="row">
                                <div class="col s6" align="center">
                                    <img class="responsive-img circle" src="resources/images/#{alerts.alertedDeliveryQuery.itemPicPath}" style="width: 250px; height: 250px;" />
                                </div>
                                <div class="col s6" align="left">
                                    <p>Address : #{alerts.alertedDeliveryQuery.address}</p>
                                    <p>Item Requested : #{alerts.alertedDeliveryQuery.itemName}</p>
                                    <p>Description : #{alerts.alertedDeliveryQuery.itemDesc}</p>
                                    <p>Scheduled Delivery Time : #{alerts.alertedDeliverySchedule.deliveryDate}</p>
                                    <br/>
                                    <ui:fragment rendered="#{alerts.alertedDeliverySchedule.delivererId == user.id}">
                                        <div class="row" style="vertical-align: bottom;">
                                            <h:commandButton styleClass="waves-effect waves-light btn" action="#{dashboardSchedule.onclickEdit(alerts.alertedDeliverySchedule)}" value="Edit Schedule" />
                                        </div>
                                    </ui:fragment>
                                </div>
                            </div>
                            <br/>
                            <br/>
                            <br/>
                            <ui:fragment rendered="#{alerts.alertedDeliverySchedule.delivererId == user.id}">
                                <div class="row">
                                    <div class="col s12">
                                        Preset Messages : <h:commandButton onclick="M.toast({html: 'Sent!'})" actionListener="#{alerts.presetOTW(user)}" styleClass="waves-effect waves-light btn" style="margin-right: 5px;" value="On My Way" icon="fa fa-home" />  <h:commandButton onclick="M.toast({html: 'Sent!'})" actionListener="#{alerts.presetLate(user)}" styleClass="waves-effect waves-light btn" value="I might be late" icon="fa fa-clock-o" />
                                    </div>
                                </div>
                            </ui:fragment>
                            <ui:fragment rendered="#{alerts.alertedDeliverySchedule.recipientId == user.id}">
                                <div class="row">
                                    <div class="col s12">
                                        Preset Messages : <h:commandButton onclick="M.toast({html: 'Sent!'})" actionListener="#{alerts.presetUnavailable(user)}" styleClass="waves-effect waves-light btn" style="margin-right: 5px;" value="I'm Not At Home" icon="fa fa-home" />  <h:commandButton onclick="M.toast({html: 'Sent!'})" actionListener="#{alerts.presetHurry(user)}" styleClass="waves-effect waves-light btn" value="Please Hurry" icon="fa fa-clock-o" />
                                    </div>
                                </div>
                            </ui:fragment>


                            <div class="row">
                                <div class="col s12">
                                    <h4 style="color: gray;">OR</h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col s12">
                                    Make Your Own Message!
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s10">
                                    <h:inputTextarea id="alertMsg" styleClass="materialize-textarea" rows="10" cols="10" value="#{alerts.customMsg}" />
                                    <h:outputLabel for="alertMsg" value="Enter Message : " />
                                </div>
                                <div class="col s2">
                                    <h:commandButton styleClass="waves-effect waves-light btn-small" value="Submit" onclick="M.toast({html: 'Sent!'})" actionListener="#{alerts.sendCustomMsg(user)}" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12" align="center">
                                    <ui:fragment rendered="#{alerts.alertedDeliverySchedule.delivererId == user.id}">
                                        <ui:fragment rendered="#{alerts.alertedDeliverySchedule.delivererItemConfirmation == true}">
                                            <span style="background-color: green; padding: 10px 30px; color: white; border-radius: 30px;">  <i class="fa fa-check-circle"></i>  Item Confirmed! Waiting for the recipient to confirm product.</span>
                                        </ui:fragment>
                                        <ui:fragment rendered="#{alerts.alertedDeliverySchedule.delivererItemConfirmation == false}">
                                            <h:commandButton styleClass="waves-effect waves-light btn-small" action="#{alerts.confirmDelivererDeliverySchedule(alerts.alertedDeliverySchedule.id, user.id)}" icon="fa fa-comment" value="Confirm Delivery Completion" />
                                        </ui:fragment>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{alerts.alertedDeliverySchedule.recipientId == user.id}">
                                        <ui:fragment rendered="#{alerts.alertedDeliverySchedule.recipientItemConfirmation == true}">
                                            <span style="background-color: green; padding: 10px 30px; color: white; border-radius: 30px;">  <i class="fa fa-check-circle"></i>Item Confirmed! Waiting for the deliverer to confirm product.</span>
                                        </ui:fragment>
                                        <ui:fragment rendered="#{alerts.alertedDeliverySchedule.recipientItemConfirmation == false}">
                                            <h:commandButton styleClass="waves-effect waves-light btn-small" action="#{alerts.confirmRecipientDeliverySchedule(alerts.alertedDeliverySchedule.id, user.id)}" icon="fa fa-comment" value="Confirm Delivery Completion" />
                                        </ui:fragment>
                                    </ui:fragment>
                                </div>
                            </div>
                            <br/>
                        </div>
                    </ui:fragment>
                </h:form>
            </div>

            <div id="modal1" class="modal">
                <div class="modal-content">
                    <h4>Alerts!</h4>
                    <p>This feature helps to send SMS to your recipient's phone number! In order for you to use this system to notify your recipients, please link your phone number to your account!</p>
                </div>
                <div class="modal-footer">
                    <a href="edit_account_settings.xhtml" class="modal-close waves-effect waves-green btn-flat">Add Phone Number</a>
                </div>
            </div>

            <div id="modal2" class="modal">
                <h:form id="loadDialog">
                    <div class="modal-content">
                        <div class="row">
                            <div class="col s6" align="center">
                                <img class="responsive-img circle" src="resources/images/#{dashboardSchedule.selectedRequestDetail.itemPicPath}" style="width: 250px; height: 250px;" />
                            </div>
                            <div class="col s6">
                                <ui:repeat value="#{dashboardSchedule.sentScheduledRequestDetails}" var="tempRequest">
                                    <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                        <h4>#{deliveryScheduleOptions.recipientName}'s Request Info</h4>
                                        <br/>
                                        <p>Address : #{tempRequest.address}</p>
                                        <p>Item Requested : #{tempRequest.itemName}</p>
                                        <p>Description : #{tempRequest.itemDesc}</p>
                                    </ui:fragment>
                                </ui:repeat>
                                <ui:repeat value="#{dashboardSchedule.receivedScheduledRequestDetails}" var="tempRequest">
                                    <ui:fragment rendered="#{tempRequest.id == tempSchedules.deliveryId}">
                                        <h4>Your Request Info</h4>
                                        <br/>
                                        <p>Deliverer : #{deliveryScheduleOptions.delivererName}</p>
                                        <p>Item Requested : #{tempRequest.itemName}</p>
                                        <p>Description : #{tempRequest.itemDesc}</p>
                                        <p>Notes given by Deliverer : #{tempSchedules.additionalComments}</p>
                                    </ui:fragment>
                                </ui:repeat>
                                <p>Time : #{deliveryScheduleOptions.deliveryDate}</p>
                            </div>
                        </div>
                    </div>
                    <h:inputHidden value="#{deliveryScheduleOptions.recipientId}" /><h:inputHidden value="#{deliveryScheduleOptions.delivererId}" /><h:inputHidden value="#{deliveryScheduleOptions.deliveryId}" />
                    <ui:fragment rendered="#{deliveryScheduleOptions.recipientId == user.id}">
                        <div class="modal-footer">
                            <p:commandLink oncomplete="M.Modal.getInstance($('#modal2')).close();$('.userProfileView').css('display', 'block');$('#calendar\\:schedule').css('display', 'none'); $('.requestView').css('display', 'none'); $('.alertNotification').css('display', 'none'); $('.blurMsg').css('display', 'none');" update="profileView" action="#{profileView.loadUserRating(deliveryScheduleOptions.delivererId)}">View #{deliveryScheduleOptions.delivererName} Profile</p:commandLink>
                        </div>
                    </ui:fragment>
                </h:form>
            </div>
        </div>
    </h:body>

    <h:outputScript>
        $(document).ready(function(){
            $('.datepicker').datepicker({
                format : "dd/mm/yyyy"
            });
            $('.tabs').tabs();
            $('.tooltipped').tooltip();
            $('.collapsible').collapsible();
            $('.sidenav').sidenav();
            $('.modal').modal();
        });
    </h:outputScript>

</html>
